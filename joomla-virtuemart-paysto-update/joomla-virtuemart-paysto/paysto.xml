<?xml version="1.0" encoding="UTF-8"?>
<extension version="3.0" type="plugin" group="vmpayment" method="upgrade">
    <name>Paysto</name>
    <author>Markus Shmidt</author>
    <creationDate>December 2015</creationDate>
    <authorEmail>markus.shmmidt@yandex.ru</authorEmail>
    <license>http://www.gnu.org/licenses/gpl-3.0.html GNU/GPL</license>
    <version>2.0.1</version>
    <description>Paysto Payment Plugin</description>
    <files>
        <filename plugin="paysto">paysto.php</filename>
        <folder>images</folder>
    </files>
    <languages>
        <language tag="ru-RU">ru-RU.plg_vmpayment_paysto.ini</language>
    </languages>
    <vmconfig>
        <fields name="params" addfieldpath="/plugins/vmpayment/paysto/fields">
            <fieldset name="basic">
                <field type="getpaysto" default=""/>
                <field name="list_tax"
                       type="repeatable"
                       buttons= "add,remove"
                       icon="list"
                       description="PLG_TINY_FIELD_TEMPLATE_FIELD_ELEMENTS_DESC"
                       label="PLG_PAYSTO_VM3_NDS">
                    <fieldset  name="list_tax_modal" repeat="true">
                        <field  name="vat"
                                type="sql"
                                label="Налог"
                                query="SELECT calc_name FROM #__virtuemart_calcs WHERE calc_kind='VatTax'"
                                key_field="calc_name"
                                value_field="calc_name"
                                required="false">
                        </field>
                        <field name="tax" type="list" default="0" label="Ставка ндс" search="false" >
                            <option value="Y">With VAT</option>
                            <option value="N">Without VAT</option>
                        </field>
                    </fieldset>
                    <!--$data['entry_useOnlyList'] = $this->language->get('entry_useOnlyList');-->
                    <!--$data['entry_serversList'] = $this->language->get('entry_serversList');-->
                    <!--$data['entry_order_status'] = $this->language->get('entry_order_status');-->

                </field>
                <field name="payment_logos" scope="com_virtuemart" type="vmfiles" label="PLG_PAYSTO_VM3_LOGO"
                       directory="/plugins/vmpayment/paysto/images"
                       default="default" hide_default="1" hide_none="1" stripext="0" exclude="^_"/>

                <field name="merchant_id" type="text" label="PLG_PAYSTO_VM3_MERCHANT_ID"/>
                <field name="secret_key" type="text" label="PLG_PAYSTO_VM3_SECRET_KRY"/>
                <field name="description" type="text" label="PLG_PAYSTO_VM3_DESCRIPTION"/>
            </fieldset>
        </fields>
    </vmconfig>
</extension>